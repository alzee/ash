#!/bin/bash
#
# My envs
# Create hard link ~/.env when running ~/.ash/a.sh -L
# and ~/.env will be sourced in ~/.bash_profile
# Export all these envs and set $env_exported at the end of this file.

[ "$env_exported" ] && return

set -a

# Reset PS1 only if it's an interactive shell(PS1 is already set)
# Do not set if on a android device (using termux)
[ -z "$ANDROID_ROOT" ] && PS1=${PS1:+"[\u@\h \W]\\$ "}
# https://wiki.archlinux.org/index.php/IBus#rxvt-unicode
# Seems not necessary
GTK_IM_MODULE=ibus
XMODIFIERS=@im=ibus
QT_IM_MODULE=ibus

GPG_TTY=

if [ -f /etc/os-release ]; then
	. /etc/os-release
else
	# bsd
	ID=$(uname)
fi

TERMINAL=alacritty
HISTTIMEFORMAT="%b %d %T "
HISTCONTROL=ignoreboth
LIBVIRT_DEFAULT_URI=qemu:///system
#ftp_proxy=
#http_proxy=
#https_proxy=
#all_proxy=
#SOCKS_SERVER=
#SOCKS_VERSION=5
if ! [[ "$PATH" =~ "$HOME/.local/bin" ]]; then
	PATH=$PATH:$HOME/.local/bin
fi

if  [ "$ID" = debian ]; then
	[[ ! "$PATH" =~ "/usr/sbin:/sbin" ]] && PATH=/usr/sbin:/sbin:$PATH
fi

# ANSI escape code
black="\e[30m"
red="\e[31m"
green="\e[32m"
yellow="\e[33m"
blue="\e[34m"
magenta="\e[35m"
cyan="\e[36m"
white="\e[37m"
bg_black="\e[40m"
bg_red="\e[41m"
bg_green="\e[42m"
bg_yellow="\e[43m"
bg_blue="\e[44m"
bg_magenta="\e[45m"
bg_cyan="\e[46m"
bg_white="\e[47m"
end="\e[m"
bold="\e[1m"
faint="\e[2m"
italic="\e[3m"
underline="\e[4m"
blinks="\e[5m"
blindr="\e[6m"
image="\e[7m"
conceal="\e[8m"
cross="\e[9m"

# miscellaneous
# DRI_PRIME=1
N_PREFIX=~/.local
ANDROID_SDK_ROOT=~/l/android-studio-sdk
screen=matrix
vim_default_session=~/.vim/session/default.vim
DICTIONARYAPI_KEY=
# local envs
# is_workstation=1
# domain=
# mysql_root_pw=
[ -f ~/.env.local ] && . ~/.env.local
#NETHACKOPTIONS='pickup_types:$"?+!=/*, !pickup_thrown, time, color'

if [ "$domain" ];then
	for i in $(grep -o "\w*\.$domain" ~/.ssh/config)
	do
		# TODO can we not use eval here?
		# export is good, but we already have set -a
		eval ${i%%.*}=$i
	done
fi
unset i

vps=$azure

env_exported=my_length_is_nonzero

set +a
