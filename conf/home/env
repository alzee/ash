#!/bin/bash
#
# My envs
# Create hard link ~/.env when running ~/.ash/a.sh -L
# and ~/.env will be sourced in ~/.bash_profile
# Export all these envs and set $ENV_EXPORTED at the end of this file.

[ "$ENV_EXPORTED" ] && return

set -a

# Reset PS1 only if it's an interactive shell(PS1 is already set)
# Do not set if in termux
[ -z "$TERMUX_VERSION" ] && PS1=${PS1:+"[\u@\h \W]\\$ "}
# https://wiki.archlinux.org/index.php/IBus#rxvt-unicode
# Seems not necessary
GTK_IM_MODULE=ibus
XMODIFIERS=@im=ibus
QT_IM_MODULE=ibus

if [ -f /etc/os-release ]; then
	. /etc/os-release
else
	# bsd
	ID=$(uname)
fi

BC_ENV_ARGS=~/.bc
TERMINAL=alacritty
HISTTIMEFORMAT="%b %d %T "
HISTCONTROL=ignoreboth
LIBVIRT_DEFAULT_URI=qemu:///system
if ! [[ "$PATH" =~ "$HOME/.local/bin" ]]; then
    PATH=$PATH:$HOME/.local/bin
fi

if  [[ "$ID" = debian && ! "$PATH" =~ "/usr/sbin:/sbin" ]]; then
    PATH=/usr/sbin:/sbin:$PATH
fi
# PATH=$PATH:$HOME/.cargo/bin

# miscellaneous
# DRI_PRIME=1
ANDROID_SDK_ROOT=~/l/android-studio-sdk
SCREEN_SESSION=matrix
VIM_DEFAULT_SESSION=~/.vim/session/default.vim
#NETHACKOPTIONS='pickup_types:$"?+!=/*, !pickup_thrown, time, color'

AWS_DEFAULT_REGION=ap-east-1 # See https://docs.aws.amazon.com/general/latest/gr/rande.html
#AWS_REGION=
#AWS_PROFILE=

RUSTUP_DIST_SERVER=https://mirrors.ustc.edu.cn/rust-static
RUSTUP_UPDATE_ROOT=https://mirrors.ustc.edu.cn/rust-static/rustup

. ~/.ansi_escape_code

# .env.local template
# . ~/.proxy
# PROMPT_COMMAND=activate   # a function to activate python venv
# LIBGL_ALWAYS_SOFTWARE=1 # For ARM. See https://github.com/alacritty/alacritty/issues/3624#issuecomment-617428381
# IS_WORKSTATION=1
# DOMAIN=
# DICTIONARYAPI_KEY=
# VPS=
# WIN_IP=192.168.122.119  # win guest ip
# MOUSE=
# TOUCHPAD=
# SCREENDIR=~/.screen   # for WSL issue: Cannot make directory '/run/screen': Permission denied
# WG_INTERFACE=
# MONITOR=
# MONITOR_ROTATE=
# TERM=xterm-256color # to fix screen 5.0.0 video
[ -f ~/.env.local ] && . ~/.env.local

let ENV_EXPORTED++

set +a
