#!/bin/bash
# vim:ft=sh

dns=1.1.1.1

[ $1 ] || { ping $dns && exit; }
# If not only contain numbers and ., take it as a domain
[[ $1 =~ ^[0-9.]+$ ]] || { ping $1 && exit; }

# https://stackoverflow.com/a/21336679/7714132
ip=$(ip route get $dns | awk -F'src ' 'NR==1 {split($2,a," ");print a[1]}')
c=$(awk -F'.' '{print NF}' <<< "$1")
case "$c" in
    1)
        ping $(cut -d'.' -f1-3 <<< $ip)."$1"
        ;;
    2)
        ping $(cut -d'.' -f1-2 <<< $ip)."$1"
        ;;
    3)
        ping 10."$1"
        ;;
    4)
        ping "$1"
        ;;
esac
