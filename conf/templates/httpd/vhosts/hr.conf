<VirtualHost *:80>
    ServerName hr.dev.itove.com
    RewriteEngine On
    RewriteCond %{HTTPS} off
    RewriteRule ^ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]
</VirtualHost>

<VirtualHost *:443>
    ServerName hr.dev.itove.com

    LogLevel info
    ErrorLog /var/log/hr.dev.itove.com_error.log
    TransferLog /var/log/hr.dev.itove.com_access.log

    SSLEngine On
    SSLCertificateFile /home/al/cert/itove.com.fullchain.cer
    SSLCertificateKeyFile /home/al/cert/itove.com.key

    ProxyPreserveHost On

    <Location "/">
        Require all granted
        ProxyPass http://127.0.0.1:3000/
        ProxyPassReverse http://127.0.0.1:3000/
        ProxyPassReverseCookieDomain 127.0.0.1 hr.dev.itove.com
    </Location>

    <Location "/api/">
        Require all granted
        ProxyPass http://127.0.0.1:8000/api/
        ProxyPassReverse http://127.0.0.1:8000/api/
        ProxyPassReverseCookieDomain 127.0.0.1 hr.dev.itove.com
    </Location>

    <Location "/docs">
        Require all granted
        ProxyPass http://127.0.0.1:8000/docs
        ProxyPassReverse http://127.0.0.1:8000/docs
        ProxyPassReverseCookieDomain 127.0.0.1 hr.dev.itove.com
    </Location>

    <Location "/redoc">
        Require all granted
        ProxyPass http://127.0.0.1:8000/redoc
        ProxyPassReverse http://127.0.0.1:8000/redoc
        ProxyPassReverseCookieDomain 127.0.0.1 hr.dev.itove.com
    </Location>

    <Location "/openapi.json">
        Require all granted
        ProxyPass http://127.0.0.1:8000/openapi.json
        ProxyPassReverse http://127.0.0.1:8000/openapi.json
        ProxyPassReverseCookieDomain 127.0.0.1 hr.dev.itove.com
    </Location>

    <Location "/health">
        Require all granted
        ProxyPass http://127.0.0.1:8000/health
        ProxyPassReverse http://127.0.0.1:8000/health
        ProxyPassReverseCookieDomain 127.0.0.1 hr.dev.itove.com
    </Location>

</VirtualHost>
